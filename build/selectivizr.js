(function(f){typeof define==="function"?define("selectivizr",f):f()})(function(require,exports,module){"use strict";!function(e){function t(e){return g.query(e)}function n(e){return e.replace(E,L).replace(T,function(e,t,n){var s=[];return n.split(",").map(function(e,t){e=d(e)+B;var n=[];s[t]=e.replace(C,function(t,s,c,i,l){if(s)return n.length>0&&(N.push({selector:e.substring(0,l),patches:n}),n=[]),s;var o=c?r(c):a(i);return o?(n.push(o),"."+o.className):t})},n.split(",")),t+s.join(",")})}function a(e){return!R||R.test(e)?{className:i(e),applyClass:!0}:null}function r(t){var n,a,r=!0,s=i(t.slice(1)),c=":not("===t.substring(0,5);c&&(t=t.slice(5,-1));var l=t.indexOf("(");if(l>-1&&(t=t.substring(0,l)),":"===t.charAt(0))switch(t.slice(1)){case"target":if(8===m){r=function(t){var n=function(){var e=location.hash,n=e.slice(1);return c?e===j||t.id!==n:e!==j&&t.id===n};return h(e,"hashchange",function(){f(t,s,n())}),n()};break}return!1;case"checked":r=function(e){return P.test(e.type)&&h(e,"propertychange",function(){"checked"===event.propertyName&&f(e,s,e.checked!==c)}),e.checked!==c};break;case"disabled":c=!c;case"enabled":r=function(e){return z.test(e.tagName)?(h(e,"propertychange",function(){"$disabled"===event.propertyName&&f(e,s,e.$disabled===c)}),y.push(e),e.$disabled=e.disabled,e.disabled===c):":enabled"===t?c:!c};break;case"focus":n="focus",a="blur";case"hover":n||(n="mouseenter",a="mouseleave"),r=function(e){return h(e,c?a:n,function(){f(e,s,!0)}),h(e,c?n:a,function(){f(e,s,!1)}),c};break;default:if(!x.test(t))return!1}return{className:s,applyClass:r}}function s(){for(var e,n,a,r,s=0;s<N.length;s++){n=N[s].selector,a=N[s].patches,r=n.replace(S,j),(r===j||r.charAt(r.length-1)===B)&&(r+="*");try{e=t(r)}catch(i){l("Selector '"+n+"' threw exception '"+i+"'")}if(e)for(var o=0,u=e.length;u>o;o++){for(var d=e[o],f=d.className,h=0,b=a.length;b>h;h++){var v=a[h];c(d,v)||!v.applyClass||v.applyClass!==!0&&v.applyClass(d)!==!0||(f=p(f,v.className,!0))}d.className=f}}}function c(e,t){return new RegExp("(^|\\s)"+t.className+"(\\s|$)").test(e.className)}function i(e){return k+"-"+(6===m&&w?$++:e.replace(A,function(e){return e.charCodeAt(0)}))}function l(t){e.console&&e.console.log(t)}function o(e){return e.replace(U,L)}function u(e){return o(e).replace(O,B)}function d(e){return u(e.replace(q,L).replace(I,L))}function f(e,t,n){var a=e.className,r=p(a,t,n);r!==a&&(e.className=r,e.parentNode.className+=j)}function p(e,t,n){var a=new RegExp("(^|\\s)"+t+"(\\s|$)"),r=a.test(e);return n?r?e:e+B+t:r?o(e.replace(a,L)):e}function h(e,t,n){e.attachEvent("on"+t,n)}function b(){clearTimeout(v),v=setTimeout(s,250)}var v,g=window.stylefix||require("stylefix"),m=g.ieVersion,y=[],N=[],$=0,w=!0,k="slvzr",x=/^:(empty|(first|last|only|nth(-last)?)-(child|of-type))$/,E=/:(:first-(?:line|letter))/g,T=/((?:^|(?:\s*})+)(?:\s*@media[^{]+{)?)\s*([^\{]*?[\[:][^{]+)/g,C=/([ +~>])|(:[a-z-]+(?:\(.*?\)+)?)|(\[.*?\])/g,S=/(:not\()?:(hover|enabled|disabled|focus|checked|target|active|visited|first-line|first-letter)\)?/g,A=/[^\w-]/g,z=/^(INPUT|SELECT|TEXTAREA|BUTTON)$/,P=/^(checkbox|radio)$/,R=m>6?/[\$\^*]=(['"])\1/:null,q=/([(\[+~])\s+/g,I=/\s+([)\]+~])/g,O=/\s+/g,U=/^\s*((?:[\S\s]*\S)?)\s*$/,j="",B=" ",L="$1";9>m&&(setInterval(function(){y.forEach(function(e){e.disabled!==e.$disabled&&(e.disabled?(e.disabled=!1,e.$disabled=!0,e.disabled=!0):e.$disabled=e.disabled)})},20),g.register(function(e,t){return t?(e=n(e),b(),e):void 0}));var V={patchStyleSheet:n,enabledWatchers:y,applyPatches:s,domPatches:N};try{module.exports=V}catch(W){window.selectivizr=V}}(window);});